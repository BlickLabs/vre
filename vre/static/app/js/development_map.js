var insertMap = (function () {
  'use strict';
  /*global google*/
  return function (latLng, mapTitle, zoom, locations) {
    function init() {
      var mapZoom = zoom !== undefined ? zoom : 13,
        mapDOM = document.getElementById('location-map'),
        mapOptions,
        map,
        marker,
        markers = [];
      mapOptions = {
        zoom: mapZoom,
        center: new google.maps.LatLng(latLng[0], latLng[1]),
        styles: [
          {
             "featureType":"all",
             "elementType":"labels.text.fill",
             "stylers":[
                {
                   "saturation":36
                },
                {
                   "color":"#333333"
                },
                {
                   "lightness":40
                }
             ]
          },
          {
             "featureType":"all",
             "elementType":"labels.text.stroke",
             "stylers":[
                {
                   "visibility":"on"
                },
                {
                   "color":"#ffffff"
                },
                {
                   "lightness":16
                }
             ]
          },
          {
             "featureType":"all",
             "elementType":"labels.icon",
             "stylers":[
                {
                   "visibility":"off"
                }
             ]
          },
          {
             "featureType":"administrative",
             "elementType":"geometry.fill",
             "stylers":[
                {
                   "color":"#fefefe"
                },
                {
                   "lightness":20
                }
             ]
          },
          {
             "featureType":"administrative",
             "elementType":"geometry.stroke",
             "stylers":[
                {
                   "color":"#fefefe"
                },
                {
                   "lightness":17
                },
                {
                   "weight":1.2
                }
             ]
          },
          {
             "featureType":"administrative.province",
             "elementType":"labels.text",
             "stylers":[
                {
                   "visibility":"off"
                }
             ]
          },
          {
             "featureType":"administrative.locality",
             "elementType":"labels.text",
             "stylers":[
                {
                   "visibility":"simplified"
                },
                {
                   "lightness":"-11"
                },
                {
                   "gamma":"1.07"
                },
                {
                   "weight":"0.93"
                }
             ]
          },
          {
             "featureType":"administrative.neighborhood",
             "elementType":"labels.text",
             "stylers":[
                {
                   "visibility":"off"
                }
             ]
          },
          {
             "featureType":"administrative.land_parcel",
             "elementType":"geometry",
             "stylers":[
                {
                   "visibility":"off"
                }
             ]
          },
          {
             "featureType":"administrative.land_parcel",
             "elementType":"labels.text",
             "stylers":[
                {
                   "visibility":"off"
                }
             ]
          },
          {
             "featureType":"landscape",
             "elementType":"geometry",
             "stylers":[
                {
                   "color":"#f5f5f5"
                },
                {
                   "lightness":20
                }
             ]
          },
          {
             "featureType":"poi",
             "elementType":"geometry",
             "stylers":[
                {
                   "color":"#f5f5f5"
                },
                {
                   "lightness":21
                }
             ]
          },
          {
             "featureType":"poi.park",
             "elementType":"geometry",
             "stylers":[
                {
                   "color":"#dedede"
                },
                {
                   "lightness":21
                }
             ]
          },
          {
             "featureType":"road.highway",
             "elementType":"geometry.fill",
             "stylers":[
                {
                   "color":"#ffffff"
                },
                {
                   "lightness":17
                }
             ]
          },
          {
             "featureType":"road.highway",
             "elementType":"geometry.stroke",
             "stylers":[
                {
                   "color":"#ffffff"
                },
                {
                   "lightness":29
                },
                {
                   "weight":0.2
                }
             ]
          },
          {
             "featureType":"road.arterial",
             "elementType":"geometry",
             "stylers":[
                {
                   "color":"#ffffff"
                },
                {
                   "lightness":18
                }
             ]
          },
          {
             "featureType":"road.local",
             "elementType":"geometry",
             "stylers":[
                {
                   "color":"#ffffff"
                },
                {
                   "lightness":16
                }
             ]
          },
          {
             "featureType":"transit",
             "elementType":"geometry",
             "stylers":[
                {
                   "color":"#f2f2f2"
                },
                {
                   "lightness":19
                }
             ]
          },
          {
             "featureType":"water",
             "elementType":"geometry",
             "stylers":[
                {
                   "color":"#e9e9e9"
                },
                {
                   "lightness":17
                }
             ]
          }
       ]
      };
      map = new google.maps.Map(mapDOM, mapOptions);
      if (!locations) {
        marker = new google.maps.Marker({
          position: new google.maps.LatLng(latLng[0], latLng[1]),
          map: map,
          title: mapTitle
        });
        markers.push(marker);
      } else {
        locations.forEach(function (item) {
          var item_marker = new google.maps.Marker({
            position: new google.maps.LatLng(item.coordinates[0], item.coordinates[1]),
            map: map,
            title: item.title
          });
          markers.push(item_marker);
        });
      }
    }
    google.maps.event.addDomListener(window, 'load', init);
  };
}());